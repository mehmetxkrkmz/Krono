<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Elite Study Tracker | Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&family=JetBrains+Mono:wght@500;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg: #030303;
            --card: rgba(10, 10, 10, 0.75);
            --accent: #00f2ff;
            --accent-glow: rgba(0, 242, 255, 0.3);
            --text: #ffffff;
            --dim: rgba(255, 255, 255, 0.5);
            --danger: #ff3e3e;
            --border: rgba(255, 255, 255, 0.1);
            --glass: blur(40px);
        }

        body.light-mode {
            --bg: #f0f4f8;
            --card: rgba(255, 255, 255, 0.8);
            --text: #1a202c;
            --dim: rgba(26, 32, 44, 0.6);
            --danger: #e53e3e;
            --accent: #3182ce;
            --accent-glow: rgba(49, 130, 206, 0.15);
            --border: rgba(0, 0, 0, 0.08);
        }

        html, body { overflow-x: hidden; width: 100%; position: relative; }
        * { margin: 0; padding: 0; box-sizing: border-box; transition: background 0.4s, color 0.4s; }
        
        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'Plus Jakarta Sans', sans-serif;
            min-height: 100vh;
            display: flex; flex-direction: column; align-items: center; padding: 40px 20px;
        }

        /* --- ÜST AYDINLATMA --- */
        .cosmic-glow {
            position: fixed; top: -15%; left: 50%; transform: translateX(-50%);
            width: 140%; height: 70%;
            background: radial-gradient(circle at 50% 0%, var(--accent-glow) 0%, transparent 60%);
            z-index: -2; pointer-events: none;
            animation: breathe-glow 6s ease-in-out infinite alternate;
        }

        @keyframes breathe-glow {
            0% { opacity: 0.4; transform: translateX(-50%) scale(1); filter: blur(40px); }
            100% { opacity: 1; transform: translateX(-50%) scale(1.15); filter: blur(60px); }
        }

        /* --- PARÇACIKLAR --- */
        .particles-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; pointer-events: none;
        }

        .particle {
            position: absolute; background: var(--accent);
            border-radius: 50%; opacity: 0.1;
            filter: blur(1px);
            animation: float-slow linear infinite;
        }

        @keyframes float-slow {
            0% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(40px, -50vh) scale(1.3); }
            100% { transform: translate(-20px, -100vh) scale(1); }
        }

        /* --- ANA KONTEYNER VE KRONOMETRE --- */
        .glass-container {
            background: var(--card);
            backdrop-filter: var(--glass);
            border: 1px solid var(--border);
            border-radius: 40px;
            padding: 60px 40px;
            width: 100%; max-width: 850px;
            text-align: center;
            box-shadow: 0 40px 100px rgba(0,0,0,0.5);
            margin-bottom: 30px;
            position: relative;
        }

        .timer-box {
            position: relative; display: inline-block; padding: 10px 40px;
            border-radius: 30px; transition: 0.5s;
        }

        .running .timer-box::after {
            content: ''; position: absolute; inset: 0;
            border-radius: 30px; padding: 2px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor; mask-composite: exclude;
            animation: rotate-border 2s linear infinite;
        }

        @keyframes rotate-border {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .timer-val {
            font-family: 'JetBrains Mono', monospace;
            font-size: clamp(3.5rem, 16vw, 8rem); 
            font-weight: 800; letter-spacing: -4px;
            position: relative; z-index: 5;
        }

        /* --- BUTONLAR --- */
        .btn-group { display: flex; justify-content: center; gap: 20px; margin-top: 30px; flex-wrap: wrap; }
        .btn {
            padding: 20px 45px; border-radius: 20px; border: none;
            cursor: pointer; font-weight: 700; font-size: 0.9rem;
            display: flex; align-items: center; justify-content: center;
            gap: 12px; text-transform: uppercase; min-width: 190px; transition: 0.3s;
        }
        .btn-start { background: var(--accent); color: #000; box-shadow: 0 0 20px var(--accent-glow); }
        .btn-finish { background: rgba(255, 255, 255, 0.05); color: var(--text); border: 1px solid var(--border); }
        .btn-finish:not(:disabled):hover { background: var(--danger); color: white; }

        /* --- VERİ PANELİ --- */
        .data-explorer {
            width: 100%; max-width: 850px;
            background: var(--card); border-radius: 35px;
            padding: 40px; border: 1px solid var(--border);
            backdrop-filter: var(--glass);
        }
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 30px; }
        .stat-card { background: rgba(255, 255, 255, 0.03); padding: 25px; border-radius: 24px; border: 1px solid var(--border); }
        .stat-card b { display: block; font-size: 1.6rem; color: var(--accent); font-family: 'JetBrains Mono'; }

        /* --- İMZA EFEKTİ (SADE VE ŞIK) --- */
        .signature {
            margin-top: 50px; padding: 20px 40px;
            font-family: 'JetBrains Mono', monospace; font-size: 0.8rem;
            letter-spacing: 8px; color: var(--dim); text-align: center;
        }
        .sig-letter { 
            display: inline-block; 
            transition: color 0.6s ease, text-shadow 0.6s ease; 
        }

        .theme-switch {
            position: fixed; top: 25px; right: 25px; width: 50px; height: 50px;
            border-radius: 15px; background: var(--card); border: 1px solid var(--border);
            color: var(--text); cursor: pointer; display: grid; place-items: center; z-index: 100;
        }

        @media (max-width: 650px) { .stats-grid { grid-template-columns: 1fr; } .btn { width: 100%; } }
    </style>
</head>
<body>

    <button class="theme-switch" onclick="toggleTheme()">
        <i id="themeIcon" class="fas fa-moon"></i>
    </button>

    <div class="cosmic-glow"></div>
    <div id="particles" class="particles-container"></div>

    <div class="glass-container" id="timerContainer">
        <div style="letter-spacing: 5px; font-weight: 700; font-size: 0.7rem; color: var(--accent); margin-bottom: 10px; opacity: 0.8;">MehmetKorkmaz</div>
        <div class="timer-box">
            <div class="timer-val" id="timer">00:00:00</div>
        </div>
        <div class="btn-group">
            <button id="mainBtn" onclick="toggleTimer()" class="btn btn-start">
                <i class="fas fa-play"></i> Başlat
            </button>
            <button id="finishBtn" onclick="finishSession()" class="btn btn-finish" disabled>
                <i class="fas fa-stop"></i> Bitir
            </button>
        </div>
    </div>

    <div class="data-explorer">
        <div class="stats-grid">
            <div class="stat-card"><span>OTURUM</span><b id="totalSessions">0</b></div>
            <div class="stat-card"><span>TOPLAM</span><b id="totalTime">0s 0d</b></div>
            <div class="stat-card"><span>REKOR</span><b id="maxSession">00:00</b></div>
        </div>
        <div style="max-height: 380px; overflow-y: auto;">
            <table class="json-table" style="width:100%; border-collapse: separate; border-spacing: 0 8px;">
                <tbody id="dataTable"></tbody>
            </table>
        </div>
    </div>

    <footer class="signature" id="signature">DESIGNED BY MEHMET KORKMAZ</footer>

<script>
    let timerInterval, startTime, elapsedTime = 0, isRunning = false;

    function initParticles() {
        const container = document.getElementById('particles');
        for (let i = 0; i < 20; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            const size = Math.random() * 8 + 6 + 'px';
            p.style.width = size; p.style.height = size;
            p.style.left = Math.random() * 100 + 'vw';
            p.style.top = Math.random() * 100 + 'vh';
            p.style.animationDuration = Math.random() * 20 + 15 + 's';
            p.style.animationDelay = -Math.random() * 20 + 's';
            container.appendChild(p);
        }
    }

    function initSignature() {
        const sig = document.getElementById('signature');
        const text = sig.innerText;
        sig.innerHTML = '';
        text.split('').forEach(char => {
            const span = document.createElement('span');
            span.innerText = char === ' ' ? '\u00A0' : char;
            span.className = 'sig-letter';
            sig.appendChild(span);
        });
        
        const letters = document.querySelectorAll('.sig-letter');
        function glowEffect() {
            letters.forEach((letter, i) => {
                setTimeout(() => {
                    letter.style.color = 'var(--accent)';
                    letter.style.textShadow = '0 0 15px var(--accent)';
                    setTimeout(() => {
                        letter.style.color = '';
                        letter.style.textShadow = '';
                    }, 1000);
                }, i * 100);
            });
        }
        setInterval(glowEffect, 5000);
        glowEffect();
    }

    function toggleTimer() {
        const btn = document.getElementById('mainBtn');
        const container = document.getElementById('timerContainer');
        if (!isRunning) {
            isRunning = true;
            container.classList.add('running');
            startTime = Date.now() - elapsedTime;
            timerInterval = setInterval(() => {
                elapsedTime = Date.now() - startTime;
                document.getElementById('timer').textContent = formatTime(elapsedTime);
            }, 100);
            btn.innerHTML = '<i class="fas fa-pause"></i> Duraklat';
            document.getElementById('finishBtn').disabled = false;
        } else {
            isRunning = false;
            container.classList.remove('running');
            clearInterval(timerInterval);
            btn.innerHTML = '<i class="fas fa-play"></i> Devam Et';
        }
    }

    function formatTime(ms) {
        let s = Math.floor(ms / 1000);
        let m = Math.floor(s / 60);
        let h = Math.floor(m / 60);
        return [h, m % 60, s % 60].map(v => v.toString().padStart(2, '0')).join(':');
    }

    function finishSession() {
        if (elapsedTime < 1000) return;
        const db = JSON.parse(localStorage.getItem('study_db_pro') || '[]');
        db.push({
            id: Date.now(),
            date: new Date().toLocaleDateString('tr-TR'),
            durationMs: elapsedTime,
            durationStr: formatTime(elapsedTime)
        });
        localStorage.setItem('study_db_pro', JSON.stringify(db));
        elapsedTime = 0;
        document.getElementById('timer').textContent = "00:00:00";
        document.getElementById('timerContainer').classList.remove('running');
        resetUI();
        renderData();
    }

    function resetUI() {
        clearInterval(timerInterval);
        isRunning = false;
        document.getElementById('mainBtn').innerHTML = '<i class="fas fa-play"></i> Başlat';
        document.getElementById('finishBtn').disabled = true;
    }

    function renderData() {
        const db = JSON.parse(localStorage.getItem('study_db_pro') || '[]');
        const tableBody = document.getElementById('dataTable');
        document.getElementById('totalSessions').textContent = db.length;
        const totalMs = db.reduce((acc, curr) => acc + curr.durationMs, 0);
        document.getElementById('totalTime').textContent = Math.floor(totalMs/3600000) + "s " + Math.floor((totalMs%3600000)/60000) + "d";
        const maxMs = db.length > 0 ? Math.max(...db.map(o => o.durationMs)) : 0;
        document.getElementById('maxSession').textContent = formatTime(maxMs).substring(0,5);

        tableBody.innerHTML = db.slice().reverse().map(item => `
            <tr>
                <td style="padding:18px; background:rgba(255,255,255,0.03); border-radius:15px 0 0 15px;">${item.date}</td>
                <td style="padding:18px; background:rgba(255,255,255,0.03); font-weight:bold; color:var(--accent)">${item.durationStr}</td>
                <td style="padding:18px; background:rgba(255,255,255,0.03); border-radius:0 15px 15px 0; text-align:right">
                    <button onclick="deleteRecord(${item.id})" style="background:none; border:none; color:var(--dim); cursor:pointer;"><i class="fas fa-trash-alt"></i></button>
                </td>
            </tr>
        `).join('');
    }

    function deleteRecord(id) {
        if (confirm('Kaydı siliyorum Mehmet?')) {
            let db = JSON.parse(localStorage.getItem('study_db_pro') || '[]');
            db = db.filter(record => record.id !== id);
            localStorage.setItem('study_db_pro', JSON.stringify(db));
            renderData();
        }
    }

    function toggleTheme() {
        const body = document.body;
        body.classList.toggle('light-mode');
        const isLight = body.classList.contains('light-mode');
        document.getElementById('themeIcon').className = isLight ? 'fas fa-sun' : 'fas fa-moon';
        localStorage.setItem('theme', isLight ? 'light' : 'dark');
    }

    window.onload = () => {
        initParticles();
        initSignature();
        renderData();
        if(localStorage.getItem('theme') === 'light') toggleTheme();
    };
</script>

</body>

</html>
